<div class="relative">
  <button
    (click)="close()"
    class="absolute top-0 right-0 text-sm leading-6 font-medium py-1 px-3 -mt-5 -mr-5 hover:bg-slate-100 rounded-full"
  >
    X
  </button>
  <img
    [src]="data.costume.imageUrl"
    alt=""
    class="m-auto flex-none rounded-md bg-slate-100 max-h-screen-75"
    (click)="showInfo = !showInfo"
  />
  <div
    *ngIf="showInfo"
    class="min-w-0 absolute flex-auto bottom-0 w-full overflow-hidden bg-white/90 p-2"
  >
    <div>
      <h2
        class="font-semibold text-slate-900 truncate pr-8 whitespace-normal"
      >
        {{ costume.description }}
      </h2>
      <div>
        <dt class="sr-only">Type</dt>
        <div class="text-sm text-slate-400 flex items-center">
          {{ costume.type }}
          <svg
            *ngIf="costume.notes !== ''"
            width="2"
            height="2"
            fill="currentColor"
            class="mx-2 text-slate-300"
            aria-hidden="true"
          >
            <circle cx="1" cy="1" r="1" />
          </svg>
          {{ costume.notes !== "" ? costume.notes : "" }}
        </div>
      </div>
      <dl class="mt-2 flex flex-wrap text-sm leading-6">
        <div class="absolute top-0 right-0 flex items-center space-x-1">
          <app-dots-menu
            class="float-right hidden sm:inline"
            [costume]="costume"
            type="selected"
          ></app-dots-menu>
        </div>
        <div class="contents md:flex">
          <dt class="sr-only">Sizes</dt>
          <dd
            *ngFor="let size of costume.quantity"
            class="px-1.5 ring-1 ring-slate-200 rounded mr-2 flex h-min"
          >
            <p class="mr-1 text-slate-400">{{ size.count }} x</p>
            <p class="font-medium">{{ size.name }}</p>
          </dd>
        </div>
        <div class="hidden xl:block">
          <dd class="flex items-center">
            <svg
              width="2"
              height="2"
              fill="currentColor"
              class="mr-2 text-slate-300"
              aria-hidden="true"
            >
              <circle cx="1" cy="1" r="1" />
            </svg>
            <div class="text-slate-400">{{ costume.count }} in total</div>
          </dd>
        </div>
        <div *ngIf="costume.checkedOutCount > 0">
          <dd class="flex items-center">
            <svg
              width="2"
              height="2"
              fill="currentColor"
              class="mx-2 hidden md:block text-slate-300"
              aria-hidden="true"
            >
              <circle cx="1" cy="1" r="1" />
            </svg>
            <div
              class="text-slate-400 cursor-pointer hover:underline"
              (click)="openCheckOutDialog(costume)"
              (mouseover)="checkOutHover = costume.id"
              (mouseout)="checkOutHover = ''"
            >
              {{ costume.checkedOutCount }} checked out
            </div>
            <div
              class="absolute bg-gradient-to-r from-cyan-500 to-blue-500 text-white font-semibold bottom-14 min-w-28 max-w-40 ml-2 py-1 px-2 rounded-sm"
              *ngIf="checkOutHover === costume.id"
            >
              <div
                *ngFor="let checkedOutByName of costume.checkedOutBy"
                class="text-ellipsis overflow-hidden whitespace-nowrap"
              >
                {{ checkedOutByName }}
              </div>
            </div>
          </dd>
        </div>
        <div class="absolute bottom-0 right-0 flex items-center space-x-1">
          <dt class="text-sky-500">
            <span class="sr-only">Catalogue Number</span>
            <mat-icon>bookmarks_outlined</mat-icon>
          </dt>
          <dd class="font-medium">{{ costume.catalogueNo }}</dd>
        </div>
      </dl>
    </div>
  </div>
</div>
